<div class="container">
    <div class="d-flex justify-content-center bg-secondary h-100 mb-3">
      <h2>User Daten</h2>
    </div>
  
    <div class="card shadow">
      <div class="card-body">
        @if (!isLoading) {
            <form [formGroup]="userDataForm" (ngSubmit)="onSubmit(uid)">
              <!-- Name Input -->
              <mat-form-field class="w-100">
                <mat-label for="name" class="form-label">Name</mat-label>
                <input
                matInput
                type="text"
                formControlName="name"
                id="name"
                placeholder="Name"
                disable
                />
              </mat-form-field>

              <!-- Email Input -->
              <mat-form-field class="w-100">
                <mat-label for="email" class="form-label">E-Mail</mat-label>
                <input
                matInput
                type="text"
                formControlName="email"
                id="email"
                placeholder="E-Mail Adresse"
                />
              </mat-form-field>

              <!-- UID Input -->
              <mat-form-field class="w-100">
                <mat-label for="uid" class="form-label">UID</mat-label>
                <input
                matInput
                type="text"
                formControlName="uid"
                id="uid"
                placeholder="UID"
                />
              </mat-form-field>

              <!-- Role Input -->
              <mat-form-field class="w-100">
                <mat-label>Roles</mat-label>
                <mat-select formControlName="roles" multiple>
                  @for (role of rolesList; track role) {
                    <mat-option [value]="role">{{role}}</mat-option>
                  }
                </mat-select>
              </mat-form-field>

              <!-- Team Input -->
              <mat-form-field class="w-100">
                <mat-label>Team</mat-label>
                <mat-select formControlName = "team">
                  @for (team of teamList; track team) {
                    <mat-option [value]="team">{{team}}</mat-option>
                  }
                </mat-select>
              </mat-form-field>

              <!-- Buttons -->
              <div class="d-flex justify-content-between">
                  <button type="button" class="btn btn-success" (click)="userDataForm.disabled ? userDataForm.enable() : userDataForm.disable()">
                    <i class="bi bi-pen"></i>
                    Bearbeiten
                    </button>
                  <button type="submit" class="btn btn-primary" [disabled]="userDataForm.disabled">
                    <i class="bi bi-floppy"></i>
                    Speichern</button>
              </div>
            </form>
        } @else {
            <ng-container>
                <div class="d-flex justify-content-center">
                    <div class="spinner-border" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                </div>
            </ng-container>
        }
      </div>
    </div>
    <div>{{userDataForm.value | json}}</div>
    <div>{{userDataForm.disabled}}</div>
  </div>
